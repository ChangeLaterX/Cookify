[pytest]
# CI-specific pytest configuration
minversion = 7.0
addopts = -ra --strict-markers --strict-config --tb=short -v --maxfail=5
testpaths = tests
python_files = test_*.py *_test.py *tests*.py
python_classes = Test*
python_functions = test_*
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# CI-specific markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    auth: marks tests related to authentication domain
    ingredients: marks tests related to ingredients domain
    ocr: marks tests related to OCR domain
    ocr_unit: marks OCR unit tests (can run without Tesseract)
    ocr_integration: marks OCR integration tests (requires Tesseract)
    ocr_performance: marks OCR performance tests (requires Tesseract)
    email_verification: marks tests related to email verification
    security: marks tests related to security features
    ci_safe: marks tests that are safe to run in CI environment
    requires_tesseract: marks tests that require Tesseract OCR

# CI-friendly filter warnings
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::pytest.PytestDeprecationWarning
    ignore::pytest.PytestUnraisableExceptionWarning
    ignore::ResourceWarning

# Timeout for tests in CI
timeout = 300
